<?php 
// Ini setting 
ini_set("session.use_strict_mode", 1);
ini_set("session.use_only_cookies", 1);
ini_set("session.use_trans_sid", 0);
ini_set("session.cookie_httponly", "On");
ini_set("default_charshet", "utf-8");

// DB credentials.
// Get db name from environment variable (Actually from docker-compose)
$db_name = getenv('DB_NAME');

define('DB_HOST', 'mysql');
define('DB_USER', 'mysql');
define('DB_PASS', 'mysql');
define('DB_NAME', $db_name);

$db = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME);
$user_id = $_GET['user_id'];
$sql = "SELECT * from users where id='" . $user_id ."'";
$query = $db->query($sql);

if ($query->num_rows > 0) {
  // output data of each row
  while($row = $query->fetch_assoc()) {
    echo "<b>name:</b> " . $row["name"]. " - <b>email:</b> " . $row["email"]. " - <b>password:</b> " . $row["password"]. " - <b>avatar:</b> " . $row["avatar"]. " - <b>secret:</b> " . $row["secret"]. " - <b>user_folder:</b> " . $row["user_folder"]. "<br>";
  }
} else {
  echo "0 results";
}
$db->close();
?>
